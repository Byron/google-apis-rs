<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This library can be used to acquire oauth2.0 authentication for services."><title>yup_oauth2 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="yup_oauth2" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../yup_oauth2/index.html">yup_oauth2</a><span class="version">8.3.0</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../yup_oauth2/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">yup_oauth2</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/yup_oauth2/lib.rs.html#1-120">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This library can be used to acquire oauth2.0 authentication for services.</p>
<p>For your application to use this library, you will have to obtain an application
id and secret by
<a href="https://developers.google.com/youtube/registering_an_application">following this guide</a> (for
Google services) respectively the documentation of the API provider you want to connect to.</p>
<h2 id="device-flow-usage"><a href="#device-flow-usage">Device Flow Usage</a></h2>
<p>With an application secret you can get started right away, building a <code>DeviceFlowAuthenticator</code>
and obtaining tokens from it.</p>
<h2 id="service-account-flow"><a href="#service-account-flow">Service account “flow”</a></h2>
<p>When using service account credentials, no user interaction is required. The access token
can be obtained automatically using the private key of the client (which you can download
from the API provider). See <code>examples/service_account/</code> for an example on how to use service
account credentials. See
<a href="https://developers.google.com/identity/protocols/OAuth2ServiceAccount">developers.google.com</a>
for a detailed description of the protocol. This crate implements OAuth for Service Accounts
based on the Google APIs; it may or may not work with other providers.</p>
<h2 id="installed-flow-usage"><a href="#installed-flow-usage">Installed Flow Usage</a></h2>
<p>The installed flow involves showing a URL to the user (or opening it in a browser)
and then either prompting the user to enter a displayed code, or make the authorizing
website redirect to a web server spun up by this library and running on localhost.</p>
<p>In order to use the interactive method, use the <code>Interactive</code> <code>InstalledFlowReturnMethod</code>;
for the redirect method, use <code>HTTPRedirect</code>.</p>
<p>You can implement your own <code>AuthenticatorDelegate</code> in order to customize the flow;
the installed flow uses the <code>present_user_url</code> method.</p>
<p>The returned <code>Token</code> will be stored in memory in order to authorize future
API requests to the same scopes. The tokens can optionally be persisted to
disk by using <code>persist_tokens_to_disk</code> when creating the authenticator.</p>
<p>The following example, which is derived from the (actual and runnable) example in
<code>examples/test-installed/</code>, shows the basics of using this crate:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>yup_oauth2::{InstalledFlowAuthenticator, InstalledFlowReturnMethod};

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="comment">// Read application secret from a file. Sometimes it's easier to compile it directly into
    // the binary. The clientsecret file contains JSON like `{"installed":{"client_id": ... }}`
    </span><span class="kw">let </span>secret = yup_oauth2::read_application_secret(<span class="string">"clientsecret.json"</span>)
        .<span class="kw">await
        </span>.expect(<span class="string">"clientsecret.json"</span>);

    <span class="comment">// Create an authenticator that uses an InstalledFlow to authenticate. The
    // authentication tokens are persisted to a file named tokencache.json. The
    // authenticator takes care of caching tokens to disk and refreshing tokens once
    // they've expired.
    </span><span class="kw">let </span><span class="kw-2">mut </span>auth = InstalledFlowAuthenticator::builder(secret, InstalledFlowReturnMethod::HTTPRedirect)
    .persist_tokens_to_disk(<span class="string">"tokencache.json"</span>)
    .build()
    .<span class="kw">await
    </span>.unwrap();

    <span class="kw">let </span>scopes = <span class="kw-2">&amp;</span>[<span class="string">"https://www.googleapis.com/auth/drive.file"</span>];

    <span class="comment">// token(&lt;scopes&gt;) is the one important function of this crate; it does everything to
    // obtain a token that can be sent e.g. as Bearer token.
    </span><span class="kw">match </span>auth.token(scopes).<span class="kw">await </span>{
        <span class="prelude-val">Ok</span>(token) =&gt; <span class="macro">println!</span>(<span class="string">"The token is {:?}"</span>, token),
        <span class="prelude-val">Err</span>(e) =&gt; <span class="macro">println!</span>(<span class="string">"error: {:?}"</span>, e),
    }
}</code></pre></div>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.hyper"><code>pub use <a class="mod" href="../hyper/index.html" title="mod hyper">hyper</a>;</code></div></li><li><div class="item-name" id="reexport.hyper_rustls"><code>pub use <a class="mod" href="../hyper_rustls/index.html" title="mod hyper_rustls">hyper_rustls</a>;</code></div></li></ul><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="access_token/index.html" title="mod yup_oauth2::access_token">access_token</a></div><div class="desc docblock-short">pseudo authenticator for use with plain access tokens.
If you use a specialized service to manage your
OAuth2-tokens you may get just the fresh generated
access token from your service.
The intention behind this is that if two services using the
same refresh token then each service will invalitate the
access token of the other service by generating a new token.</div></li><li><div class="item-name"><a class="mod" href="authenticator/index.html" title="mod yup_oauth2::authenticator">authenticator</a></div><div class="desc docblock-short">Module containing the core functionality for OAuth2 Authentication.</div></li><li><div class="item-name"><a class="mod" href="authenticator_delegate/index.html" title="mod yup_oauth2::authenticator_delegate">authenticator_delegate</a></div><div class="desc docblock-short">Module containing types related to delegates.</div></li><li><div class="item-name"><a class="mod" href="authorized_user/index.html" title="mod yup_oauth2::authorized_user">authorized_user</a></div><div class="desc docblock-short">This module provides a token source (<code>GetToken</code>) that obtains tokens using user credentials
for use by software (i.e., non-human actors) to get access to Google services.</div></li><li><div class="item-name"><a class="mod" href="error/index.html" title="mod yup_oauth2::error">error</a></div><div class="desc docblock-short">Module containing various error types.</div></li><li><div class="item-name"><a class="mod" href="service_account_impersonator/index.html" title="mod yup_oauth2::service_account_impersonator">service_account_impersonator</a></div><div class="desc docblock-short">This module provides an authenticator that uses authorized user secrets
to generate impersonated service account tokens.</div></li><li><div class="item-name"><a class="mod" href="storage/index.html" title="mod yup_oauth2::storage">storage</a></div><div class="desc docblock-short">Interface for storing tokens so that they can be re-used. There are built-in memory and
file-based storage providers. You can implement your own by implementing the TokenStorage trait.</div></li></ul><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AccessToken.html" title="struct yup_oauth2::AccessToken">AccessToken</a></div><div class="desc docblock-short">Represents a token returned by oauth2 servers. All tokens are Bearer tokens. Other types of
tokens are not supported.</div></li><li><div class="item-name"><a class="struct" href="struct.AccessTokenAuthenticator.html" title="struct yup_oauth2::AccessTokenAuthenticator">AccessTokenAuthenticator</a></div><div class="desc docblock-short">Create a access token authenticator for use with pre-generated
access tokens</div></li><li><div class="item-name"><a class="struct" href="struct.ApplicationDefaultCredentialsAuthenticator.html" title="struct yup_oauth2::ApplicationDefaultCredentialsAuthenticator">ApplicationDefaultCredentialsAuthenticator</a></div><div class="desc docblock-short">Create an authenticator that uses a application default credentials.</div></li><li><div class="item-name"><a class="struct" href="struct.ApplicationDefaultCredentialsFlowOpts.html" title="struct yup_oauth2::ApplicationDefaultCredentialsFlowOpts">ApplicationDefaultCredentialsFlowOpts</a></div><div class="desc docblock-short">Provide options for the Application Default Credential Flow, mostly used for testing</div></li><li><div class="item-name"><a class="struct" href="struct.ApplicationSecret.html" title="struct yup_oauth2::ApplicationSecret">ApplicationSecret</a></div><div class="desc docblock-short">Represents either ‘installed’ or ‘web’ applications in a json secrets file.
See <code>ConsoleApplicationSecret</code> for more information</div></li><li><div class="item-name"><a class="struct" href="struct.AuthorizedUserAuthenticator.html" title="struct yup_oauth2::AuthorizedUserAuthenticator">AuthorizedUserAuthenticator</a></div><div class="desc docblock-short">Create an authenticator that uses an authorized user credentials.</div></li><li><div class="item-name"><a class="struct" href="struct.ConsoleApplicationSecret.html" title="struct yup_oauth2::ConsoleApplicationSecret">ConsoleApplicationSecret</a></div><div class="desc docblock-short">A type to facilitate reading and writing the json secret file
as returned by the <a href="https://code.google.com/apis/console">google developer console</a></div></li><li><div class="item-name"><a class="struct" href="struct.DeviceFlowAuthenticator.html" title="struct yup_oauth2::DeviceFlowAuthenticator">DeviceFlowAuthenticator</a></div><div class="desc docblock-short">Create an authenticator that uses the device flow.</div></li><li><div class="item-name"><a class="struct" href="struct.InstalledFlowAuthenticator.html" title="struct yup_oauth2::InstalledFlowAuthenticator">InstalledFlowAuthenticator</a></div><div class="desc docblock-short">Create an authenticator that uses the installed flow.</div></li><li><div class="item-name"><a class="struct" href="struct.ServiceAccountAuthenticator.html" title="struct yup_oauth2::ServiceAccountAuthenticator">ServiceAccountAuthenticator</a></div><div class="desc docblock-short">Create an authenticator that uses a service account.</div></li><li><div class="item-name"><a class="struct" href="struct.ServiceAccountImpersonationAuthenticator.html" title="struct yup_oauth2::ServiceAccountImpersonationAuthenticator">ServiceAccountImpersonationAuthenticator</a></div><div class="desc docblock-short">Create a access token authenticator that uses user secrets to impersonate
a service account.</div></li><li><div class="item-name"><a class="struct" href="struct.ServiceAccountKey.html" title="struct yup_oauth2::ServiceAccountKey">ServiceAccountKey</a></div><div class="desc docblock-short">JSON schema of secret service account key.</div></li></ul><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum yup_oauth2::Error">Error</a></div><div class="desc docblock-short">Encapsulates all possible results of the <code>token(...)</code> operation</div></li><li><div class="item-name"><a class="enum" href="enum.InstalledFlowReturnMethod.html" title="enum yup_oauth2::InstalledFlowReturnMethod">InstalledFlowReturnMethod</a></div><div class="desc docblock-short">Method by which the user agent return token to this application.</div></li></ul><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.parse_application_secret.html" title="fn yup_oauth2::parse_application_secret">parse_application_secret</a></div><div class="desc docblock-short">Read an application secret from a JSON string.</div></li><li><div class="item-name"><a class="fn" href="fn.parse_service_account_key.html" title="fn yup_oauth2::parse_service_account_key">parse_service_account_key</a></div><div class="desc docblock-short">Read a service account key from a JSON string.</div></li><li><div class="item-name"><a class="fn" href="fn.read_application_secret.html" title="fn yup_oauth2::read_application_secret">read_application_secret</a></div><div class="desc docblock-short">Read an application secret from a file.</div></li><li><div class="item-name"><a class="fn" href="fn.read_authorized_user_secret.html" title="fn yup_oauth2::read_authorized_user_secret">read_authorized_user_secret</a></div><div class="desc docblock-short">Read an authorized user secret from a JSON file. You can obtain it by running on the client:
<code>gcloud auth application-default login</code>.
The file should be on Windows in: <code>%APPDATA%/gcloud/application_default_credentials.json</code>
for other systems: <code>$HOME/.config/gcloud/application_default_credentials.json</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.read_service_account_key.html" title="fn yup_oauth2::read_service_account_key">read_service_account_key</a></div><div class="desc docblock-short">Read a service account key from a JSON file. You can download the JSON keys from the Google
Cloud Console or the respective console of your service provider.</div></li></ul></section></div></main></body></html>