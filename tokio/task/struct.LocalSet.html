<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `LocalSet` struct in crate `tokio`."><meta name="keywords" content="rust, rustlang, rust-lang, LocalSet"><title>tokio::task::LocalSet - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings"></script><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../tokio/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class="location">Struct LocalSet</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#implementations">Methods</a><div class="sidebar-links"><a href="#method.block_on">block_on</a><a href="#method.new">new</a><a href="#method.run_until">run_until</a><a href="#method.spawn_local">spawn_local</a></div><a class="sidebar-title" href="#trait-implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Debug">Debug</a><a href="#impl-Default">Default</a><a href="#impl-Drop">Drop</a><a href="#impl-Future">Future</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Send">!Send</a><a href="#impl-Sync">!Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-IntoFuture">IntoFuture</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></div></div><p class="location"><a href="../index.html">tokio</a>::<wbr><a href="index.html">task</a></p><div id="sidebar-vars" data-name="LocalSet" data-ty="struct" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Struct <a href="../index.html">tokio</a>::<wbr><a href="index.html">task</a>::<wbr><a class="struct" href="">LocalSet</a></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/tokio/task/local.rs.html#213-222" title="goto source code">[src]</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class="rust struct">pub struct LocalSet { /* fields omitted */ }</pre></div><div class="docblock"><p>A set of tasks which are executed on the same thread.</p>
<p>In some cases, it is necessary to run one or more futures that do not
implement <a href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html"><code>Send</code></a> and thus are unsafe to send between threads. In these
cases, a <a href="../../tokio/task/struct.LocalSet.html">local task set</a> may be used to schedule one or more <code>!Send</code>
futures to run together on the same thread.</p>
<p>For example, the following code will not compile:</p>

<div class='information'><div class='tooltip compile_fail'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered compile_fail">
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">rc</span>::<span class="ident">Rc</span>;

<span class="attribute">#[<span class="ident">tokio</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="comment">// `Rc` does not implement `Send`, and thus may not be sent between</span>
    <span class="comment">// threads safely.</span>
    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">Rc</span>::<span class="ident">new</span>(<span class="string">&quot;my unsend data...&quot;</span>);

    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">unsend_data</span>.<span class="ident">clone</span>();
    <span class="comment">// Because the `async` block here moves `unsend_data`, the future is `!Send`.</span>
    <span class="comment">// Since `tokio::spawn` requires the spawned future to implement `Send`, this</span>
    <span class="comment">// will not compile.</span>
    <span class="ident">tokio</span>::<span class="ident">spawn</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">unsend_data</span>);
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>.<span class="ident">unwrap</span>();
}</pre></div>
<h1 id="use-with-run_until" class="section-header"><a href="#use-with-run_until">Use with <code>run_until</code></a></h1>
<p>To spawn <code>!Send</code> futures, we can use a local task set to schedule them
on the thread calling <a href="../../tokio/runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. When running inside of the
local task set, we can use <a href="../../tokio/task/fn.spawn_local.html"><code>task::spawn_local</code></a>, which can spawn
<code>!Send</code> futures. For example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">rc</span>::<span class="ident">Rc</span>;
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">task</span>;

<span class="attribute">#[<span class="ident">tokio</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">Rc</span>::<span class="ident">new</span>(<span class="string">&quot;my unsend data...&quot;</span>);

    <span class="comment">// Construct a local task set that can run `!Send` futures.</span>
    <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">LocalSet</span>::<span class="ident">new</span>();

    <span class="comment">// Run the local task set.</span>
    <span class="ident">local</span>.<span class="ident">run_until</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">unsend_data</span>.<span class="ident">clone</span>();
        <span class="comment">// `spawn_local` ensures that the future is spawned on the local</span>
        <span class="comment">// task set.</span>
        <span class="ident">task</span>::<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
            <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">unsend_data</span>);
            <span class="comment">// ...</span>
        }).<span class="kw">await</span>.<span class="ident">unwrap</span>();
    }).<span class="kw">await</span>;
}</pre></div>
<p><strong>Note:</strong> The <code>run_until</code> method can only be used in <code>#[tokio::main]</code>,
<code>#[tokio::test]</code> or directly inside a call to <a href="../../tokio/runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. It
cannot be used inside a task spawned with <code>tokio::spawn</code>.</p>
<h2 id="awaiting-a-localset" class="section-header"><a href="#awaiting-a-localset">Awaiting a <code>LocalSet</code></a></h2>
<p>Additionally, a <code>LocalSet</code> itself implements <code>Future</code>, completing when
<em>all</em> tasks spawned on the <code>LocalSet</code> complete. This can be used to run
several futures on a <code>LocalSet</code> and drive the whole set until they
complete. For example,</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tokio</span>::{<span class="ident">task</span>, <span class="ident">time</span>};
<span class="kw">use</span> <span class="ident">std</span>::<span class="ident">rc</span>::<span class="ident">Rc</span>;

<span class="attribute">#[<span class="ident">tokio</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">unsend_data</span> <span class="op">=</span> <span class="ident">Rc</span>::<span class="ident">new</span>(<span class="string">&quot;world&quot;</span>);
    <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">LocalSet</span>::<span class="ident">new</span>();

    <span class="kw">let</span> <span class="ident">unsend_data2</span> <span class="op">=</span> <span class="ident">unsend_data</span>.<span class="ident">clone</span>();
    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="comment">// ...</span>
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;hello {}&quot;</span>, <span class="ident">unsend_data2</span>)
    });

    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="ident">time</span>::<span class="ident">sleep</span>(<span class="ident">time</span>::<span class="ident">Duration</span>::<span class="ident">from_millis</span>(<span class="number">100</span>)).<span class="kw">await</span>;
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;goodbye {}&quot;</span>, <span class="ident">unsend_data</span>)
    });

    <span class="comment">// ...</span>

    <span class="ident">local</span>.<span class="kw">await</span>;
}</pre></div>
<p><strong>Note:</strong> Awaiting a <code>LocalSet</code> can only be done inside
<code>#[tokio::main]</code>, <code>#[tokio::test]</code> or directly inside a call to
<a href="../../tokio/runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. It cannot be used inside a task spawned with
<code>tokio::spawn</code>.</p>
<h2 id="use-inside-tokiospawn" class="section-header"><a href="#use-inside-tokiospawn">Use inside <code>tokio::spawn</code></a></h2>
<p>The two methods mentioned above cannot be used inside <code>tokio::spawn</code>, so
to spawn <code>!Send</code> futures from inside <code>tokio::spawn</code>, we need to do
something else. The solution is to create the <code>LocalSet</code> somewhere else,
and communicate with it using an <a href="../../tokio/sync/mpsc/index.html"><code>mpsc</code></a> channel.</p>
<p>The following example puts the <code>LocalSet</code> inside a new thread.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">runtime</span>::<span class="ident">Builder</span>;
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">sync</span>::{<span class="ident">mpsc</span>, <span class="ident">oneshot</span>};
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">task</span>::<span class="ident">LocalSet</span>;

<span class="comment">// This struct describes the task you want to spawn. Here we include</span>
<span class="comment">// some simple examples. The oneshot channel allows sending a response</span>
<span class="comment">// to the spawner.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>)]</span>
<span class="kw">enum</span> <span class="ident">Task</span> {
    <span class="ident">PrintNumber</span>(<span class="ident">u32</span>),
    <span class="ident">AddOne</span>(<span class="ident">u32</span>, <span class="ident">oneshot</span>::<span class="ident">Sender</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span>),
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Clone</span>)]</span>
<span class="kw">struct</span> <span class="ident">LocalSpawner</span> {
   <span class="ident">send</span>: <span class="ident">mpsc</span>::<span class="ident">UnboundedSender</span><span class="op">&lt;</span><span class="ident">Task</span><span class="op">&gt;</span>,
}

<span class="kw">impl</span> <span class="ident">LocalSpawner</span> {
    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">new</span>() <span class="op">-</span><span class="op">&gt;</span> <span class="self">Self</span> {
        <span class="kw">let</span> (<span class="ident">send</span>, <span class="kw-2">mut</span> <span class="ident">recv</span>) <span class="op">=</span> <span class="ident">mpsc</span>::<span class="ident">unbounded_channel</span>();

        <span class="kw">let</span> <span class="ident">rt</span> <span class="op">=</span> <span class="ident">Builder</span>::<span class="ident">new_current_thread</span>()
            .<span class="ident">enable_all</span>()
            .<span class="ident">build</span>()
            .<span class="ident">unwrap</span>();

        <span class="ident">std</span>::<span class="ident">thread</span>::<span class="ident">spawn</span>(<span class="kw">move</span> <span class="op">|</span><span class="op">|</span> {
            <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">LocalSet</span>::<span class="ident">new</span>();

            <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
                <span class="kw">while</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="ident">new_task</span>) <span class="op">=</span> <span class="ident">recv</span>.<span class="ident">recv</span>().<span class="kw">await</span> {
                    <span class="ident">tokio</span>::<span class="ident">task</span>::<span class="ident">spawn_local</span>(<span class="ident">run_task</span>(<span class="ident">new_task</span>));
                }
                <span class="comment">// If the while loop returns, then all the LocalSpawner</span>
                <span class="comment">// objects have have been dropped.</span>
            });

            <span class="comment">// This will return once all senders are dropped and all</span>
            <span class="comment">// spawned tasks have returned.</span>
            <span class="ident">rt</span>.<span class="ident">block_on</span>(<span class="ident">local</span>);
        });

        <span class="self">Self</span> {
            <span class="ident">send</span>,
        }
    }

    <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">spawn</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">task</span>: <span class="ident">Task</span>) {
        <span class="self">self</span>.<span class="ident">send</span>.<span class="ident">send</span>(<span class="ident">task</span>).<span class="ident">expect</span>(<span class="string">&quot;Thread with LocalSet has shut down.&quot;</span>);
    }
}

<span class="comment">// This task may do !Send stuff. We use printing a number as an example,</span>
<span class="comment">// but it could be anything.</span>
<span class="comment">//</span>
<span class="comment">// The Task struct is an enum to support spawning many different kinds</span>
<span class="comment">// of operations.</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">run_task</span>(<span class="ident">task</span>: <span class="ident">Task</span>) {
    <span class="kw">match</span> <span class="ident">task</span> {
        <span class="ident">Task</span>::<span class="ident">PrintNumber</span>(<span class="ident">n</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;{}&quot;</span>, <span class="ident">n</span>);
        },
        <span class="ident">Task</span>::<span class="ident">AddOne</span>(<span class="ident">n</span>, <span class="ident">response</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="comment">// We ignore failures to send the response.</span>
            <span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">response</span>.<span class="ident">send</span>(<span class="ident">n</span> <span class="op">+</span> <span class="number">1</span>);
        },
    }
}

<span class="attribute">#[<span class="ident">tokio</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">spawner</span> <span class="op">=</span> <span class="ident">LocalSpawner</span>::<span class="ident">new</span>();

    <span class="kw">let</span> (<span class="ident">send</span>, <span class="ident">response</span>) <span class="op">=</span> <span class="ident">oneshot</span>::<span class="ident">channel</span>();
    <span class="ident">spawner</span>.<span class="ident">spawn</span>(<span class="ident">Task</span>::<span class="ident">AddOne</span>(<span class="number">10</span>, <span class="ident">send</span>));
    <span class="kw">let</span> <span class="ident">eleven</span> <span class="op">=</span> <span class="ident">response</span>.<span class="kw">await</span>.<span class="ident">unwrap</span>();
    <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">eleven</span>, <span class="number">11</span>);
}</pre></div>
</div><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><h3 id="impl" class="impl"><code class="in-band">impl <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl" class="anchor"></a><a class="srclink" href="../../src/tokio/task/local.rs.html#323-550" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.new" class="method"><code>pub fn <a href="#method.new" class="fnname">new</a>() -&gt; <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a><span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<div class="notable-traits-tooltiptext"><span class="docblock"><h3 class="notable">Notable traits for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3><code class="content"><span class="where fmt-newline">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="type">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>;</span></code></span></div></span></span></code><a class="srclink" href="../../src/tokio/task/local.rs.html#325-340" title="goto source code">[src]</a></h4><div class="docblock"><p>Returns a new local task set.</p>
</div><h4 id="method.spawn_local" class="method"><code>pub fn <a href="#method.spawn_local" class="fnname">spawn_local</a>&lt;F&gt;(&amp;self, future: F) -&gt; <a class="struct" href="../../tokio/task/struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;F::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<div class="notable-traits-tooltiptext"><span class="docblock"><h3 class="notable">Notable traits for <a class="struct" href="../../tokio/task/struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;T&gt;</h3><code class="content"><span class="where fmt-newline">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="../../tokio/task/struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;T&gt;</span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="type">Output</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, <a class="struct" href="../../tokio/task/struct.JoinError.html" title="struct tokio::task::JoinError">JoinError</a>&gt;;</span></code></span></div></span></span> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>: 'static,&nbsp;</span></code><a class="srclink" href="../../src/tokio/task/local.rs.html#379-389" title="goto source code">[src]</a></h4><div class="docblock"><p>Spawns a <code>!Send</code> task onto the local task set.</p>
<p>This task is guaranteed to be run on the current thread.</p>
<p>Unlike the free function <a href="../../tokio/task/fn.spawn_local.html"><code>spawn_local</code></a>, this method may be used to
spawn local tasks when the task set is <em>not</em> running. For example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">task</span>;

<span class="attribute">#[<span class="ident">tokio</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">LocalSet</span>::<span class="ident">new</span>();

    <span class="comment">// Spawn a future on the local set. This future will be run when</span>
    <span class="comment">// we call `run_until` to drive the task set.</span>
    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> {
       <span class="comment">// ...</span>
    });

    <span class="comment">// Run the local task set.</span>
    <span class="ident">local</span>.<span class="ident">run_until</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>;

    <span class="comment">// When `run` finishes, we can spawn _more_ futures, which will</span>
    <span class="comment">// run in subsequent calls to `run_until`.</span>
    <span class="ident">local</span>.<span class="ident">spawn_local</span>(<span class="kw">async</span> {
       <span class="comment">// ...</span>
    });

    <span class="ident">local</span>.<span class="ident">run_until</span>(<span class="kw">async</span> <span class="kw">move</span> {
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>;
}</pre></div>
</div><h4 id="method.block_on" class="method"><code>pub fn <a href="#method.block_on" class="fnname">block_on</a>&lt;F&gt;(&amp;self, rt: &amp;<a class="struct" href="../../tokio/runtime/struct.Runtime.html" title="struct tokio::runtime::Runtime">Runtime</a>, future: F) -&gt; F::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,&nbsp;</span></code><a class="srclink" href="../../src/tokio/task/local.rs.html#455-460" title="goto source code">[src]</a></h4><div class="docblock"><p>Runs a future to completion on the provided runtime, driving any local
futures spawned on this task set on the current thread.</p>
<p>This runs the given future on the runtime, blocking until it is
complete, and yielding its resolved result. Any tasks or timers which
the future spawns internally will be executed on the runtime. The future
may also call <a href="../../tokio/task/fn.spawn_local.html"><code>spawn_local</code></a> to spawn_local additional local futures on the
current thread.</p>
<p>This method should not be called from an asynchronous context.</p>
<h1 id="panics" class="section-header"><a href="#panics">Panics</a></h1>
<p>This function panics if the executor is at capacity, if the provided
future panics, or if called within an asynchronous execution context.</p>
<h1 id="notes" class="section-header"><a href="#notes">Notes</a></h1>
<p>Since this function internally calls <a href="../../tokio/runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>, and drives
futures in the local task set inside that call to <code>block_on</code>, the local
futures may not use <a href="fn@crate::task::block_in_place">in-place blocking</a>. If a blocking call needs to be
issued from a local task, the <a href="../../tokio/task/fn.spawn_blocking.html"><code>spawn_blocking</code></a> API may be used instead.</p>
<p>For example, this will panic:</p>

<div class='information'><div class='tooltip should_panic'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered should_panic">
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">runtime</span>::<span class="ident">Runtime</span>;
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">task</span>;

<span class="kw">let</span> <span class="ident">rt</span>  <span class="op">=</span> <span class="ident">Runtime</span>::<span class="ident">new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">LocalSet</span>::<span class="ident">new</span>();
<span class="ident">local</span>.<span class="ident">block_on</span>(<span class="kw-2">&amp;</span><span class="ident">rt</span>, <span class="kw">async</span> {
    <span class="kw">let</span> <span class="ident">join</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">spawn_local</span>(<span class="kw">async</span> {
        <span class="kw">let</span> <span class="ident">blocking_result</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">block_in_place</span>(<span class="op">|</span><span class="op">|</span> {
            <span class="comment">// ...</span>
        });
        <span class="comment">// ...</span>
    });
    <span class="ident">join</span>.<span class="kw">await</span>.<span class="ident">unwrap</span>();
})</pre></div>
<p>This, however, will not panic:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">runtime</span>::<span class="ident">Runtime</span>;
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">task</span>;

<span class="kw">let</span> <span class="ident">rt</span>  <span class="op">=</span> <span class="ident">Runtime</span>::<span class="ident">new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">local</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">LocalSet</span>::<span class="ident">new</span>();
<span class="ident">local</span>.<span class="ident">block_on</span>(<span class="kw-2">&amp;</span><span class="ident">rt</span>, <span class="kw">async</span> {
    <span class="kw">let</span> <span class="ident">join</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">spawn_local</span>(<span class="kw">async</span> {
        <span class="kw">let</span> <span class="ident">blocking_result</span> <span class="op">=</span> <span class="ident">task</span>::<span class="ident">spawn_blocking</span>(<span class="op">|</span><span class="op">|</span> {
            <span class="comment">// ...</span>
        }).<span class="kw">await</span>;
        <span class="comment">// ...</span>
    });
    <span class="ident">join</span>.<span class="kw">await</span>.<span class="ident">unwrap</span>();
})</pre></div>
</div><h4 id="method.run_until" class="method"><code>pub async fn <a href="#method.run_until" class="fnname">run_until</a>&lt;F&gt;(&amp;self, future: F) -&gt; F::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,&nbsp;</span></code><a class="srclink" href="../../src/tokio/task/local.rs.html#490-499" title="goto source code">[src]</a></h4><div class="docblock"><p>Run a future to completion on the local set, returning its output.</p>
<p>This returns a future that runs the given future with a local set,
allowing it to call <a href="../../tokio/task/fn.spawn_local.html"><code>spawn_local</code></a> to spawn additional <code>!Send</code> futures.
Any local futures spawned on the local set will be driven in the
background until the future passed to <code>run_until</code> completes. When the future
passed to <code>run</code> finishes, any local futures which have not completed
will remain on the local set, and will be driven on subsequent calls to
<code>run_until</code> or when <a href="#awaiting-a-localset">awaiting the local set</a> itself.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">tokio</span>::<span class="ident">task</span>;

<span class="attribute">#[<span class="ident">tokio</span>::<span class="ident">main</span>]</span>
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="ident">task</span>::<span class="ident">LocalSet</span>::<span class="ident">new</span>().<span class="ident">run_until</span>(<span class="kw">async</span> {
        <span class="ident">task</span>::<span class="ident">spawn_local</span>(<span class="kw">async</span> <span class="kw">move</span> {
            <span class="comment">// ...</span>
        }).<span class="kw">await</span>.<span class="ident">unwrap</span>();
        <span class="comment">// ...</span>
    }).<span class="kw">await</span>;
}</pre></div>
</div></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><h3 id="impl-Debug" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Debug" class="anchor"></a><a class="srclink" href="../../src/tokio/task/local.rs.html#552-556" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.fmt" class="method hidden"><code>fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, fmt: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></code><a class="srclink" href="../../src/tokio/task/local.rs.html#553-555" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div><h3 id="impl-Default" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Default" class="anchor"></a><a class="srclink" href="../../src/tokio/task/local.rs.html#582-586" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.default" class="method hidden"><code>fn <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default" class="fnname">default</a>() -&gt; <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a><span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<div class="notable-traits-tooltiptext"><span class="docblock"><h3 class="notable">Notable traits for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3><code class="content"><span class="where fmt-newline">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="type">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>;</span></code></span></div></span></span></code><a class="srclink" href="../../src/tokio/task/local.rs.html#583-585" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Returns the &quot;default value&quot; for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></div><h3 id="impl-Drop" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html" title="trait core::ops::drop::Drop">Drop</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Drop" class="anchor"></a><a class="srclink" href="../../src/tokio/task/local.rs.html#588-614" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.drop" class="method hidden"><code>fn <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop" class="fnname">drop</a>(&amp;mut self)</code><a class="srclink" href="../../src/tokio/task/local.rs.html#589-613" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Executes the destructor for this type. <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop">Read more</a></p>
</div></div><h3 id="impl-Future" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Future" class="anchor"></a><a class="srclink" href="../../src/tokio/task/local.rs.html#558-580" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Output" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="type">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></code></h4><div class='docblock'><p>The type of value produced on completion.</p>
</div><h4 id="method.poll" class="method hidden"><code>fn <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#tymethod.poll" class="fnname">poll</a>(self: <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Self&gt;, cx: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/task/wake/struct.Context.html" title="struct core::task::wake::Context">Context</a>&lt;'_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/task/poll/enum.Poll.html" title="enum core::task::poll::Poll">Poll</a>&lt;Self::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>&gt;</code><a class="srclink" href="../../src/tokio/task/local.rs.html#561-579" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Attempt to resolve the future to a final value, registering
the current task for wakeup if the value is not yet available. <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#tymethod.poll">Read more</a></p>
</div></div></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><h3 id="impl-RefUnwindSafe" class="impl"><code class="in-band">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-RefUnwindSafe" class="anchor"></a><a class="srclink" href="../../src/tokio/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div><h3 id="impl-Send" class="impl"><code class="in-band">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Send" class="anchor"></a><a class="srclink" href="../../src/tokio/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div><h3 id="impl-Sync" class="impl"><code class="in-band">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Sync" class="anchor"></a><a class="srclink" href="../../src/tokio/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div><h3 id="impl-Unpin" class="impl"><code class="in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-Unpin" class="anchor"></a><a class="srclink" href="../../src/tokio/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div><h3 id="impl-UnwindSafe" class="impl"><code class="in-band">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../../tokio/task/struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></code><a href="#impl-UnwindSafe" class="anchor"></a><a class="srclink" href="../../src/tokio/lib.rs.html#1" title="goto source code">[src]</a></h3><div class="impl-items"></div></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><h3 id="impl-Any" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-Any" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#131-135" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.type_id" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#132" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id="impl-Borrow%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-Borrow%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#207-211" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.borrow" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<div class="notable-traits-tooltiptext"><span class="docblock"><h3 class="notable">Notable traits for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'_ mut </a>F</h3><code class="content"><span class="where fmt-newline">impl&lt;'_, F&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'_ mut </a>F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="type">Output</a> = &lt;F as <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>;</span></code></span></div></span></span></code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#208" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id="impl-BorrowMut%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214-218" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.borrow_mut" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<div class="notable-traits-tooltiptext"><span class="docblock"><h3 class="notable">Notable traits for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'_ mut </a>F</h3><code class="content"><span class="where fmt-newline">impl&lt;'_, F&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;'_ mut </a>F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="type">Output</a> = &lt;F as <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>;</span></code></span></div></span></span></code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#215" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id="impl-From%3CT%3E" class="impl"><code class="in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href="#impl-From%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#545-549" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.from" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#546" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id="impl-Into%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-Into%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#534-541" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.into" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#538" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id="impl-IntoFuture" class="impl"><code class="in-band">impl&lt;F&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html" title="trait core::future::into_future::IntoFuture">IntoFuture</a> for F <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,&nbsp;</span></code><a href="#impl-IntoFuture" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/future/into_future.rs.html#20-27" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Output-1" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#associatedtype.Output" class="type">Output</a> = &lt;F as <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a></code></h4><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>into_future</code>)</div></div><div class='docblock'><p>The output that the future will produce on completion.</p>
</div><h4 id="associatedtype.Future" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#associatedtype.Future" class="type">Future</a> = F</code></h4><div class="item-info"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>into_future</code>)</div></div><div class='docblock'><p>Which kind of future are we turning this into?</p>
</div><h4 id="method.into_future" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#tymethod.into_future" class="fnname">into_future</a>(self) -&gt; &lt;F as <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html" title="trait core::future::into_future::IntoFuture">IntoFuture</a>&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#associatedtype.Future" title="type core::future::into_future::IntoFuture::Future">Future</a></code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/future/into_future.rs.html#24" title="goto source code">[src]</a></h4><div class="item-info hidden"><div class="stab unstable"><span class="emoji">🔬</span> This is a nightly-only experimental API. (<code>into_future</code>)</div></div><div class='docblock hidden'><p>Creates a future from a value.</p>
</div></div><h3 id="impl-TryFrom%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#582-591" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Error" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id="method.try_from" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#588" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id="impl-TryInto%3CU%3E" class="impl"><code class="in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href="#impl-TryInto%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#568-577" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Error-1" class="type"><code>type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id="method.try_into" class="method hidden"><code>pub fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#574" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="tokio"></div>
    <script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>